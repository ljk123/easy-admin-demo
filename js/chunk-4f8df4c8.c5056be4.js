(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f8df4c8"],{"3ee4":function(e,t,a){"use strict";var l=a("b672"),i=a.n(l);i.a},"5a58":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collection"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},open:e.handleOpenDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialogData,rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"名称","label-width":"60px",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogData.name,callback:function(t){e.$set(e.dialogData,"name",t)},expression:"dialogData.name"}})],1),a("el-form-item",{attrs:{label:"权限","label-width":"60px"}},[a("el-tree",{ref:"tree",attrs:{"node-key":"md5","default-expand-all":!0,props:e.props,data:e.auth,"show-checkbox":""}})],1),a("el-form-item",{attrs:{label:"描述","label-width":"60px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogData.desc,callback:function(t){e.$set(e.dialogData,"desc",t)},expression:"dialogData.desc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDialogForm}},[e._v("确 定")])],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("添加")]),a("div",{staticClass:"table-box grid-content bg-white"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{fixed:"",label:"序号",type:"index",width:"55",align:"center"}}),a("el-table-column",{attrs:{fixed:"",prop:"name",label:"名称",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"desc",label:"备注",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"create_time_format",label:"创建时间",width:"180",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},i=[],o=(a("ac6a"),a("7f7f"),a("d722")),n={name:"Collection",data:function(){return{tableData:[],dialogFormVisible:!1,dialogTitle:"",dialogData:{},auth:[],props:{children:"children",label:"label"},rules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;o["a"].userGroupLists().then(function(t){var a=t.data;0!=a.status?e.tableData=a.data:e.$message({message:a.msg,duration:3e3,type:"error"})})},handleDelete:function(e,t){var a=this;this.$confirm("是否删除"+t.name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o["a"].delUserGroup(t.id).then(function(t){var l=t.data;0!=l.status?a.tableData.splice(e,1):a.$message({message:l.msg,duration:3e3,type:"error"})})})},handleEdit:function(e){this.dialogFormVisible=!0,this.dialogTitle="修改分组",this.dialogData={id:e.id,name:e.name,desc:e.desc,auth:e.auth}},handleAdd:function(){this.dialogFormVisible=!0,this.dialogTitle="新增分组",this.dialogData={name:"",desc:"",auth:[]}},handleOpenDialog:function(){var e=this;if(0!==this.auth.length){var t=[];this.dialogData.auth.forEach(function(e){"not_leaf"!==e.substr(0,8)&&t.push(e)}),this.$refs.tree.setCheckedKeys(t)}else o["a"].allRoles().then(function(t){var a=t.data;if(0!=a.status){var l=[];for(var i in a.data)l.push(a.data[i]);e.auth=s(a.data),e.handleOpenDialog()}else e.$message({message:a.msg,duration:3e3,type:"error"})})},submitDialogForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(t){var a={};a.name=e.dialogData.name,a.desc=e.dialogData.desc||"",a.id=e.dialogData.id||0,a.auth=e.$refs.tree.getCheckedKeys().concat(e.$refs.tree.getHalfCheckedKeys()),o["a"].saveUserGroup(a).then(function(t){var a=t.data;0!=a.status?(e.dialogFormVisible=!1,e.getList()):e.$message({message:a.msg,duration:3e3,type:"error"})})}})}}},r=function(e,t){for(var a=0;a<e.length;a++)if(e[a].label===t)return a;return!1},s=function(e){var t=[];for(var a in e)for(var l=e[a],i=t,o=0;o<l.length;o++){var n=r(i,l[o]);!1!==n?(void 0===i[n].children&&(i[n].children=[]),i=i[n].children):(i.push({label:l[o],md5:o===l.length-1?a:"not_leaf"+a}),o--)}return console.log(t),t},d=n,c=(a("3ee4"),a("2877")),u=Object(c["a"])(d,l,i,!1,null,null,null);u.options.__file="Group.vue";t["default"]=u.exports},b672:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4f8df4c8.c5056be4.js.map